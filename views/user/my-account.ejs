<style>
    .hoverable:hover {
        box-shadow: 0 0.2rem 0.5rem rgba(0, 0, 0, 0.2);
    }
</style>


<body>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/" rel="nofollow">Home</a>
                    <span></span> Pages
                    <span></span> Account
                </div>
            </div>
        </div>
        <% if (messages.passwordError) { %>
            <div class="d-flex justify-content-center align-items-center">
                <div class="alert alert-danger col-lg-3 mt-2 text-center">
                    <%= messages.passwordError %>
                </div>
            </div>
          <% } else if(messages.passwordSuccess) { %>
          <div class="d-flex justify-content-center align-items-center">
            <div class="alert alert-success col-lg-3 mt-2 text-center">
                <%= messages.passwordSuccess %>
            </div>
        </div>
        <% } %>
        <section class="pt-90 pb-150">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto " style="margin: 0!important">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="dashboard-menu">
                                    <ul class="nav flex-column" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab"
                                                href="#dashboard" role="tab" aria-controls="dashboard"
                                                aria-selected="false"><i class="fi-rs-user mr-10"></i>Account
                                                Overview</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link " id="wallet-tab" data-bs-toggle="tab" href="#wallet"
                                                role="tab" aria-controls="wallet" aria-selected="false"><i
                                                    class="fi-rs-user mr-10"></i>Wallet</a>
                                        </li>
                                        <!-- <li class="nav-item">
                                            <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders" role="tab" aria-controls="orders" aria-selected="false"><i class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                                        </li> -->
                                        <li class="nav-item">
                                            <a class="nav-link" id="address-tab" data-bs-toggle="tab" href="#address"
                                            role="tab" aria-controls="address" aria-selected="true"><i
                                            class="fi-rs-marker mr-10"></i>Edit or Add new Address</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="track-orders-tab" data-bs-toggle="tab"
                                                href="#change-password" role="tab" aria-controls="track-orders"
                                                aria-selected="false"><i
                                                class="fi-rs-shopping-cart-check mr-10"></i>Change Password</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link " href="/my-orders" aria-selected="false"><i
                                                    class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                                        </li>
                                        <!-- <li class="nav-item">
                                            <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab"
                                                href="#account-detail" role="tab" aria-controls="account-detail"
                                                aria-selected="true"><i class="fi-rs-user mr-10"></i>Account details</a>
                                        </li> -->
                                        <li class="nav-item">
                                            <a class="nav-link" href="/logout"><i
                                                    class="fi-rs-sign-out mr-10"></i>Logout</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="tab-content dashboard-content">
                                    <div class="tab-pane fade active show" id="dashboard" role="tabpanel"
                                        aria-labelledby="dashboard-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Hello <%= user.name %>
                                                </h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="person-person"
                                                    style=" margin-top: 7px; padding-bottom: unset;">
                                                    <div class="person-background"
                                                        style="    position: relative;background: #F5F5F6;height: 12rem;padding: 25px 30px;">
                                                        <div class="person-infoWrapper">
                                                            <div class="person-imageHolder"
                                                                style=" height: 10rem;width: 8rem;display: inline; float: left;">
                                                                <div class="person-defaultImage"
                                                                    style="position: unset;">
                                                                    <img src="user-assets/imgs/profile-image.png"
                                                                        alt="user-profile-image"
                                                                        style="  margin-top: 0.5rem;">
                                                                </div>
                                                            </div>
                                                            <div class="person-infoHolder"
                                                                style="height: 8rem; display: block;">
                                                                <a class="person-editProfile" href=""
                                                                    style="float: right;border: 1px solid #3E4152;border-radius: 2px;color: #3E4152;padding:2px;font-size: 10px;font-weight: 800;background-color: rgba(255,255,255,0.6);">
                                                                    Edit Profile </a>
                                                                <div
                                                                    style="padding-block-start: 3rem;padding-left: 9rem; ">
                                                                    <h6>
                                                                        <%= user.email %>
                                                                    </h6>
                                                                    <br>
                                                                    <h6>
                                                                        <%= user.mobileNo %>
                                                                    </h6>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row mt-30"
                                                    style="display: flex;justify-content: center;align-items: center;">
                                                    <div class="col-lg-4 ">
                                                        <a class="link-card" href="/my-orders">
                                                            <div class="card hoverable"
                                                                style="height: 12rem;margin-bottom: 1rem; ">
                                                                <div class="card-body"
                                                                    style="display: flex;justify-content: center;align-items: center;flex-direction: column;">
                                                                    <img src="user-assets/imgs/profile-orders.png"
                                                                        alt=""
                                                                        style="height: 2.5rem;width: 2.5rem;margin-bottom: 1rem;">
                                                                    <h5 class="card-title">Orders</h5>
                                                                    <p class="card-text" style="font-size: 0.8rem;">
                                                                        Check your order status</p>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <a class="link-card" href="/wishlist">
                                                            <div class="card hoverable"
                                                                style="height: 12rem; margin-bottom: 1rem;">
                                                                <div class="card-body"
                                                                    style="display: flex;justify-content: center;align-items: center;flex-direction: column;">
                                                                    <img src="user-assets/imgs/profile-collections.png"
                                                                        alt=""
                                                                        style="height: 2.5rem;width: 2.5rem;margin-bottom: 1rem;">
                                                                    <h5 class="card-title">Wishlist</h5>
                                                                    <p class="card-text" style="font-size: 0.8rem;">
                                                                        Products that you saved for later</p>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <a class="link-card" href="">
                                                            <div class="card hoverable"
                                                                style="height: 12rem;margin-bottom: 1rem;">
                                                                <div class="card-body"
                                                                    style="display: flex;justify-content: center;align-items: center;flex-direction: column;">
                                                                    <img src="user-assets/imgs/profile-wallet.png"
                                                                        alt=""
                                                                        style="height: 2.5rem;width: 2.5rem;margin-bottom: 1rem;">
                                                                    <h5 class="card-title">Your Wallet</h5>
                                                                    <p class="card-text" style="font-size: 0.8rem;">
                                                                        Manage all your refunds</p>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <a class="link-card" href="/add-address">
                                                            <div class="card hoverable" style="height: 12rem;">
                                                                <div class="card-body"
                                                                    style="display: flex;justify-content: center;align-items: center;flex-direction: column;">
                                                                    <img src="user-assets/imgs/profile-address.png"
                                                                        alt=""
                                                                        style="height: 2.5rem;width: 2.5rem;margin-bottom: 1rem;">
                                                                    <h5 class="card-title">Addresses</h5>
                                                                    <p class="card-text" style="font-size: 0.8rem;">Save
                                                                        addresses for hassle-free checkout</p>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <a class="link-card" href="">
                                                            <div class="card hoverable" style="height: 12rem;">
                                                                <div class="card-body"
                                                                    style="display: flex;justify-content: center;align-items: center;flex-direction: column;">
                                                                    <img src="user-assets/imgs/profile-coupons.png"
                                                                        alt=""
                                                                        style="height: 2.5rem;width: 2.5rem;margin-bottom: 1rem;">
                                                                    <h5 class="card-title">Coupons</h5>
                                                                    <p class="card-text" style="font-size: 0.8rem;">
                                                                        Manage coupons for additional discounts</p>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                    <div class="col-lg-4">
                                                        <a class="link-card" href="/">
                                                            <div class="card hoverable" style="height: 12rem;">
                                                                <div class="card-body"
                                                                    style="display: flex;justify-content: center;align-items: center;flex-direction: column;">
                                                                    <img src="user-assets/imgs/profile-edit.png" alt=""
                                                                        style="height: 2.5rem;width: 2.5rem;margin-bottom: 1rem;">
                                                                    <h5 class="card-title">Profile Details</h5>
                                                                    <p class="card-text" style="font-size: 0.8rem;">
                                                                        Manage your profile details</p>
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- wallet page -->
                                    <div class="tab-pane fade " id="wallet" role="tabpanel" aria-labelledby="wallet-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Wallet </h5>
                                            </div>
                                            <div class="card-body contact-from-area">
                                                <div class="row">
                                                        <div class="card mb-2" >
                                                            <div class="card-body ">
                                                                <div class="hoverable" style="height: fit-content;">
                                                                    <h3 class="card-title " style="margin-left: 1rem;padding-top: 2rem;">WALLET</h3>
                                                                </div>
                                                                <hr style="border-top: 2px solid gray; margin: 0 auto; margin-bottom: 1rem;">
                                    
                                                                <p class="card-text" style="font-size: 1.5rem; padding-top: 2rem;">
                                                                    Your wallet balance is:   â‚¹<%= locals.wallet %>
                                                                </p>
                                                            </div>
                                                        </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Your Orders</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Order</th>
                                                                <th>Date</th>
                                                                <th>Status</th>
                                                                <th>Total</th>
                                                                <th>Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>#1357</td>
                                                                <td>March 45, 2020</td>
                                                                <td>Processing</td>
                                                                <td>$125.00 for 2 item</td>
                                                                <td><a href="#" class="btn-small d-block">View</a></td>
                                                            </tr>
                                                            <tr>
                                                                <td>#2468</td>
                                                                <td>June 29, 2020</td>
                                                                <td>Completed</td>
                                                                <td>$364.00 for 5 item</td>
                                                                <td><a href="#" class="btn-small d-block">View</a></td>
                                                            </tr>
                                                            <tr>
                                                                <td>#2366</td>
                                                                <td>August 02, 2020</td>
                                                                <td>Completed</td>
                                                                <td>$280.00 for 3 item</td>
                                                                <td><a href="#" class="btn-small d-block">View</a></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="change-password" role="tabpanel"
                                        aria-labelledby="track-orders-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Password </h5>
                                            </div>
                                            <div class="card-body contact-from-area">
                                                <p>To change your password, enter current password and new password below.</p>
                                                <div class="row">
                                                    <div class="col-lg-8">
                                                        <form id="passwordForm" autocomplete="off" class=" mt-30 mb-50" action="/change-password"
                                                            method="post" onsubmit="return passSubmit()">
                                                            <div class="input-style mb-20">
                                                                <label>Current password</label>
                                                                <input required name="currentPassword" id="currPassword"
                                                                    type="password" class="square">
                                                            </div>
                                                            <div class="input-style mb-20">
                                                                <label>New password</label>
                                                                <input required name="newPassword" id="password"
                                                                    type="password" class="square" onkeyup="return validatePassword()">
                                                                <span id="password-error" style="color: red; font-size: 12px; margin-top: 5px;">
                                                                </span>
                                                            </div>
                                                            <div class="input-style mb-20">
                                                                <label>Confirm password</label>
                                                                <input required name="confirmPassword" id="password2"
                                                                    type="password" class="square" onkeyup="return validatePassword2()">
                                                                <span id="password2-error" style="color: red; font-size: 12px; margin-top: 5px;">
                                                                </span>
                                                            </div>
                                                            <button class="submit submit-auto-width"
                                                                type="submit">Submit</button>
                                                                <span id="passSubmit-error" style="color: red; font-size: 12px; margin-top: 5px;">
                                                                </span>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Address page -->
                                    <div class="tab-pane fade" id="address" role="tabpanel" aria-labelledby="address-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Addresses </h5>
                                            </div>
                                            <div class="card-body contact-from-area" >
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                    <button class="rounded-pill btn-small mb-2 float-right" style="background-color: #088178; color: white; text-decoration: none;float: right;">
                                                        <a href="/add-address" style="color: white;">+ Add New Address</a>
                                                    </button>
                                                </div>
                                                </div>
                                                <div class="row">
                                                    <% if(locals.addresses){ %>
                                                        <% addresses.forEach(function(address){ %>
                                                            <div class="row">
                                                                <div class="col-lg-8">
                                                                    <div class="card hoverable" style="height: 14rem; margin-bottom: 1rem;">
                                                                        <div class="card-body"
                                                                            style="display: flex; justify-content: space-between;  flex-direction: column;">
                                                                            <div>
                                                                                <span>
                                                                                    <h4 style="color: #696E79; font-size: 15px;"><strong>
                                                                                            <%= address.name %>
                                                                                        </strong></h4>
                                                                                </span>
                                                                                <!-- <span class="badge bg-secondary rounded-pill" style="float: right;">office</span> -->
                                                                            </div>
                                                                            <div style="margin-bottom: .5rem;">
                                                                                <h5 style="line-height: 1.5; color: #696E79; font-size: 13px;">
                                                                                    <%= address.address %>
                                                                                </h5>
                                                                                <h5 style="line-height: 1.5; color: #696E79; font-size: 13px;">
                                                                                    <%= address.city %>
                                                                                </h5>
                                                                                <h5 style="line-height: 1.5; color: #696E79; font-size: 13px;">
                                                                                    district</h5>
                                                                                <h5 style="line-height: 1.5; color: #696E79; font-size: 13px;">
                                                                                    <%= address.state %>
                                                                                </h5>
                                                                                <h5 style="line-height: 1.5; color: #696E79; font-size: 13px;">
                                                                                    <%= address.zipcode %>
                                                                                </h5>
                                                                                <h5 style="line-height: 1.5; color: #696E79; font-size: 13px;">
                                                                                    <%= address.phone %>
                                                                                </h5>
                                                                            </div>
                                                                            <div
                                                                                style="height: 2.5rem; border: 1px solid #dee2e6; display: flex; justify-content: space-between; align-items: center;">
                                                                                <div class="col-lg-6"
                                                                                    style="border-right: 1px solid #dee2e6; display: flex; justify-content: center; align-items: center;">
                                                                                    <span><a href="/edit-address?address=<%= JSON.stringify(address) %>">
                                                                                            Edit </a></span>
                                                                                </div>
                                                                                <div class="col-lg-6"
                                                                                    style="display: flex; justify-content: center; align-items: center;">
                                                                                    <span style="float: right;"><a
                                                                                            href="/remove-address?address=<%= JSON.stringify(address) %>">
                                                                                            Remove </a></span>
                                                                                </div>
                                                                            </div>
                                    
                                    
                                                                        </div>
                                                                    </div>
                                                                </div>
                                    
                                    
                                                            </div>
                                                            <% }) %>
                                                                <% } %>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="account-detail" role="tabpanel"
                                        aria-labelledby="account-detail-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Account Details</h5>
                                            </div>
                                            <div class="card-body">
                                               
                                                <form method="post" name="enq">
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <label>First Name <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="name"
                                                                type="text">
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Last Name <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="phone">
                                                        </div>
                                                        <div class="form-group col-md-12">
                                                            <label>Display Name <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="dname"
                                                                type="text">
                                                        </div>
                                                        <div class="form-group col-md-12">
                                                            <label>Email Address <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="email"
                                                                type="email">
                                                        </div>
                                                        <div class="form-group col-md-12">
                                                            <label>Current Password <span
                                                                    class="required">*</span></label>
                                                            <input required="" class="form-control square"
                                                                name="password" type="password">
                                                        </div>
                                                        <div class="form-group col-md-12">
                                                            <label>New Password <span class="required">*</span></label>
                                                            <input required="" class="form-control square"
                                                                name="npassword" type="password">
                                                        </div>
                                                        <div class="form-group col-md-12">
                                                            <label>Confirm Password <span
                                                                    class="required">*</span></label>
                                                            <input required="" class="form-control square"
                                                                name="cpassword" type="password">
                                                        </div>
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-fill-out submit"
                                                                name="submit" value="Submit">Save</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</body>


<script>
    function validatePassword() {
        const regPass = /^(?=.*[0-9])(?=.*[!@#$%^&*])(?=.*[a-zA-Z])[a-zA-Z0-9!@#$%^&*]{6,}$/
        const password = document.getElementById('password').value
        if (!regPass.test(password)) {
            document.getElementById('password-error').innerHTML = 'Password should contain atleast 6 characters including a digit,alphabet,and a special charecter'
            return false
        } else {
            document.getElementById('password-error').innerHTML = ''
            return true
        }
    }
    function validatePassword2() {
        if ((document.getElementById('password').value) === document.getElementById('password2').value) {
            document.getElementById('password2-error').innerHTML = ''
            return true
        } else {
            document.getElementById('password2-error').innerHTML = 'Enter correct password'
            return false
        }
    }
    function passSubmit() {
        if (!validatePassword() || !confirmPassword()) {
            document.getElementById('passSubmit-error').innerHTML = 'please fill all the fields correctly'
            return false
        } else {
            document.getElementById('passwordForm').submit()

        }
    }
</script>